@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@{
    ViewData["Title"] = "Edit Student";
}

<h1>Edit Student</h1>

<form id="editStudentForm">
    <input type="hidden" id="studentId" name="studentId" value="@Model.StudentId" />
    <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" class="form-control" id="name" name="name" value="@Model.Name">
    </div>
    <div class="form-group">
        <label for="age">Age:</label>
        <input type="number" class="form-control" id="age" name="age" value="@Model.Age">
    </div>
    <button type="submit" class="btn btn-primary">Update Student</button>
</form>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $("#editStudentForm").submit(function (event) {
            event.preventDefault();
            var formData = {
                studentId: $("#studentId").val(),
                name: $("#name").val(),
                age: $("#age").val()
            };
            $.ajax({
                url: "/api/student/" + formData.studentId,
                type: "PUT",
                contentType: "application/json",
                data: JSON.stringify(formData),
                success: function () {
                    window.location.href = "/Student";
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });
</script>