@{
    ViewData["Title"] = "Students";
}

<h1>Students</h1>

<table id="studentTable" class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Date of Birth</th>
            <th>Gender</th>
            <th>Email</th>
            <th>Phone Number</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <!-- Student data will be loaded here dynamically -->
    </tbody>
</table>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        // Load students on page load
        loadStudents();

        function loadStudents() {
            // Simulated JSON data based on the provided schema
            var studentsData = [
                {
                    "studentid": 1,
                    "firstname": "John",
                    "lastname": "Doe",
                    "dateofbirth": "2000-01-01",
                    "gender": "Male",
                    "email": "john@example.com",
                    "phonenumber": "1234567890"
                },
                {
                    "studentid": 2,
                    "firstname": "Jane",
                    "lastname": "Doe",
                    "dateofbirth": "2000-01-02",
                    "gender": "Female",
                    "email": "jane@example.com",
                    "phonenumber": "9876543210"
                }
            ];

            displayStudents(studentsData);
        }

        function displayStudents(students) {
            var studentTable = $("#studentTable tbody");
            studentTable.empty();
            $.each(students, function (index, student) {
                studentTable.append(`
                            <tr>
                                <td>${student.studentid}</td>
                                <td>${student.firstname}</td>
                                <td>${student.lastname}</td>
                                <td>${student.dateofbirth}</td>
                                <td>${student.gender}</td>
                                <td>${student.email}</td>
                                <td>${student.phonenumber}</td>
                                <td>
                                    <button class="btn btn-info btn-sm" onclick="editStudent(${student.studentid})">Update</button>
                                    <button class="btn btn-danger btn-sm" onclick="deleteStudent(${student.studentid})">Delete</button>
                                </td>
                            </tr>
                        `);
            });
        }

        // Function to edit a student
        function editStudent(studentId) {
            // Assuming you want to redirect to a separate edit page with the student ID in the URL
            window.location.href = "/Student/Update/" + studentId;
        }

        // Function to delete a student
        function deleteStudent(studentId) {
            // Here you can send an AJAX request to your server to delete the student
            // For demonstration purposes, let's simply remove the row from the table
            if (confirm("Are you sure you want to delete this student?")) {
                $("#studentTable tbody").find(`[data-studentid='${studentId}']`).remove();
            }
        }
    });
</script>
