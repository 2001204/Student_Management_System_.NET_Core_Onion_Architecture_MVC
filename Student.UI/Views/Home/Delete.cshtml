@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@{
    ViewData["Title"] = "Delete Student";
}

<h1>Delete Student</h1>

<p>Are you sure you want to delete this student?</p>
<p><strong>Name:</strong> @Model.Name</p>
<p><strong>Age:</strong> @Model.Age</p>

<form id="deleteStudentForm">
    <input type="hidden" id="studentId" name="studentId" value="@Model.StudentId" />
    <button type="submit" class="btn btn-danger">Delete</button>
    <a href="/Student" class="btn btn-secondary">Cancel</a>
</form>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $("#deleteStudentForm").submit(function (event) {
            event.preventDefault();
            var studentId = $("#studentId").val();
            $.ajax({
                url: "/api/student/" + studentId,
                type: "DELETE",
                success: function () {
                    window.location.href = "/Student";
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });
</script>
